(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function f(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=f(t);fetch(t.href,o)}})();const a=document.getElementById("file"),n=document.getElementById("c"),c=n.getContext("2d"),m=document.getElementById("info"),e={img:null,rot:0,flipX:!1,flipY:!1};function g(){if(!e.img)return;const i=(e.rot%360+360)%360,r=i===90||i===270;n.width=r?e.img.height:e.img.width,n.height=r?e.img.width:e.img.height}function s(){if(!e.img){c.clearRect(0,0,n.width,n.height),m.textContent="未選択";return}g();const i=n.width,r=n.height;c.save(),c.clearRect(0,0,i,r),c.translate(i/2,r/2),c.rotate(e.rot*Math.PI/180),c.scale(e.flipX?-1:1,e.flipY?-1:1),c.drawImage(e.img,-e.img.width/2,-e.img.height/2),c.restore(),m.textContent=`元: ${e.img.width}×${e.img.height} / 出力: ${n.width}×${n.height} / 回転:${e.rot}° / 左右:${e.flipX?"ON":"OFF"} / 上下:${e.flipY?"ON":"OFF"}`}a.addEventListener("change",i=>{var t;const r=(t=i.target.files)==null?void 0:t[0];if(!r)return;const f=URL.createObjectURL(r),l=new Image;l.onload=()=>{URL.revokeObjectURL(f),e.img=l,e.rot=0,e.flipX=!1,e.flipY=!1,s()},l.onerror=()=>{URL.revokeObjectURL(f),alert("画像の読み込みに失敗しました。")},l.src=f});document.getElementById("flipX").onclick=()=>{e.img&&(e.flipX=!e.flipX,s())};document.getElementById("flipY").onclick=()=>{e.img&&(e.flipY=!e.flipY,s())};document.getElementById("rotL").onclick=()=>{e.img&&(e.rot=(e.rot-90+360)%360,s())};document.getElementById("rotR").onclick=()=>{e.img&&(e.rot=(e.rot+90)%360,s())};document.getElementById("reset").onclick=()=>{e.img&&(e.rot=0,e.flipX=!1,e.flipY=!1,s())};document.getElementById("download").onclick=()=>{if(!e.img)return;const i=document.createElement("a");i.download="edited.png",i.href=n.toDataURL("image/png"),i.click()};n.width=900;n.height=600;s();
